{
  "version": 3,
  "sources": ["browser-external:node:util", "browser-external:node:fs", "../../read-chunk/node_modules/pify/index.js", "../../read-chunk/index.js"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:util\" has been externalized for browser compatibility. Cannot access \"node:util.${key}\" in client code. See https://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:fs\" has been externalized for browser compatibility. Cannot access \"node:fs.${key}\" in client code. See https://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "'use strict';\n\nconst processFn = (fn, options, proxy, unwrapped) => function (...arguments_) {\n\tconst P = options.promiseModule;\n\n\treturn new P((resolve, reject) => {\n\t\tif (options.multiArgs) {\n\t\t\targuments_.push((...result) => {\n\t\t\t\tif (options.errorFirst) {\n\t\t\t\t\tif (result[0]) {\n\t\t\t\t\t\treject(result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.shift();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (options.errorFirst) {\n\t\t\targuments_.push((error, result) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targuments_.push(resolve);\n\t\t}\n\n\t\tconst self = this === proxy ? unwrapped : this;\n\t\tReflect.apply(fn, self, arguments_);\n\t});\n};\n\nconst filterCache = new WeakMap();\n\nmodule.exports = (input, options) => {\n\toptions = {\n\t\texclude: [/.+(?:Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise,\n\t\t...options\n\t};\n\n\tconst objectType = typeof input;\n\tif (!(input !== null && (objectType === 'object' || objectType === 'function'))) {\n\t\tthrow new TypeError(`Expected \\`input\\` to be a \\`Function\\` or \\`Object\\`, got \\`${input === null ? 'null' : objectType}\\``);\n\t}\n\n\tconst filter = (target, key) => {\n\t\tlet cached = filterCache.get(target);\n\n\t\tif (!cached) {\n\t\t\tcached = {};\n\t\t\tfilterCache.set(target, cached);\n\t\t}\n\n\t\tif (key in cached) {\n\t\t\treturn cached[key];\n\t\t}\n\n\t\tconst match = pattern => (typeof pattern === 'string' || typeof key === 'symbol') ? key === pattern : pattern.test(key);\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(target, key);\n\t\tconst writableOrConfigurableOwn = (desc === undefined || desc.writable || desc.configurable);\n\t\tconst included = options.include ? options.include.some(match) : !options.exclude.some(match);\n\t\tconst shouldFilter = included && writableOrConfigurableOwn;\n\t\tcached[key] = shouldFilter;\n\t\treturn shouldFilter;\n\t};\n\n\tconst cache = new WeakMap();\n\n\tconst proxy = new Proxy(input, {\n\t\tapply(target, thisArg, args) {\n\t\t\tconst cached = cache.get(target);\n\n\t\t\tif (cached) {\n\t\t\t\treturn Reflect.apply(cached, thisArg, args);\n\t\t\t}\n\n\t\t\tconst pified = options.excludeMain ? target : processFn(target, options, proxy, target);\n\t\t\tcache.set(target, pified);\n\t\t\treturn Reflect.apply(pified, thisArg, args);\n\t\t},\n\n\t\tget(target, key) {\n\t\t\tconst property = target[key];\n\n\t\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\t\tif (!filter(target, key) || property === Function.prototype[key]) {\n\t\t\t\treturn property;\n\t\t\t}\n\n\t\t\tconst cached = cache.get(property);\n\n\t\t\tif (cached) {\n\t\t\t\treturn cached;\n\t\t\t}\n\n\t\t\tif (typeof property === 'function') {\n\t\t\t\tconst pified = processFn(property, options, proxy, target);\n\t\t\t\tcache.set(property, pified);\n\t\t\t\treturn pified;\n\t\t\t}\n\n\t\t\treturn property;\n\t\t}\n\t});\n\n\treturn proxy;\n};\n", "import {promisify} from 'node:util';\nimport fs from 'node:fs';\nimport {Buffer} from 'node:buffer';\nimport pify from 'pify';\n\nconst fsReadP = pify(fs.read, {multiArgs: true});\nconst fsOpenP = promisify(fs.open);\nconst fsCloseP = promisify(fs.close);\n\nexport async function readChunk(filePath, {length, startPosition}) {\n\tconst fileDescriptor = await fsOpenP(filePath, 'r');\n\n\ttry {\n\t\tlet [bytesRead, buffer] = await fsReadP(fileDescriptor, {\n\t\t\tbuffer: Buffer.alloc(length),\n\t\t\tlength,\n\t\t\tposition: startPosition,\n\t\t});\n\n\t\tif (bytesRead < length) {\n\t\t\tbuffer = buffer.subarray(0, bytesRead);\n\t\t}\n\n\t\treturn buffer;\n\t} finally {\n\t\tawait fsCloseP(fileDescriptor);\n\t}\n}\n\nexport function readChunkSync(filePath, {length, startPosition}) {\n\tlet buffer = Buffer.alloc(length);\n\tconst fileDescriptor = fs.openSync(filePath, 'r');\n\n\ttry {\n\t\tconst bytesRead = fs.readSync(fileDescriptor, buffer, {\n\t\t\tlength,\n\t\t\tposition: startPosition,\n\t\t});\n\n\t\tif (bytesRead < length) {\n\t\t\tbuffer = buffer.subarray(0, bytesRead);\n\t\t}\n\n\t\treturn buffer;\n\t} finally {\n\t\tfs.closeSync(fileDescriptor);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["fs", "pify"]
}
